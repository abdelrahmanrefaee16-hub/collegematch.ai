<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Recommendations - Academic Future Predictor</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 40px 20px;
            width: 100%;
            overflow-x: hidden;
        }

        .recommendations-container {
            max-width: 100%;
            width: 100%;
            margin: 0 auto;
            padding: 0 20px;
        }

        .questionnaire-header {
            text-align: center;
            color: white;
            margin-bottom: 40px;
        }

        .questionnaire-header h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            font-weight: 700;
        }

        .questionnaire-header p {
            font-size: 1.1rem;
            opacity: 0.95;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
        }

        .card-header h2 {
            font-size: 1.75rem;
            color: #2d3748;
            margin-bottom: 20px;
        }

        .alert-box {
            display: flex;
            align-items: flex-start;
            gap: 20px;
            padding: 25px;
        }

        .alert-box.success {
            background: #f0fdf4;
            border-left: 4px solid #22c55e;
        }

        .alert-box.warning {
            background: #fffbeb;
            border-left: 4px solid #f59e0b;
        }

        .alert-box.danger {
            background: #fef2f2;
            border-left: 4px solid #ef4444;
        }

        .alert-box svg {
            width: 32px;
            height: 32px;
            flex-shrink: 0;
            margin-top: 4px;
        }

        .alert-box.success svg {
            color: #22c55e;
        }

        .alert-box.warning svg {
            color: #f59e0b;
        }

        .alert-box.danger svg {
            color: #ef4444;
        }

        .alert-box h3 {
            font-size: 1.5rem;
            margin-bottom: 10px;
            color: #1f2937;
        }

        .alert-box p {
            color: #4b5563;
            line-height: 1.6;
            font-size: 1rem;
        }

        .recommendations-section {
            margin-bottom: 40px;
            width: 100%;
        }

        .recommendations-section h2 {
            font-size: 1.75rem;
            color: white;
            margin-bottom: 25px;
            font-weight: 600;
        }

        .rec-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            width: 100%;
        }

        .rec-card {
            padding: 25px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .rec-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
        }

        .rec-card.high {
            border-left: 4px solid #ef4444;
        }

        .rec-card.medium {
            border-left: 4px solid #3b82f6;
        }

        .rec-card .card-header {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 15px;
        }

        .rec-card .card-header h3 {
            font-size: 1.25rem;
            color: #1f2937;
            margin: 0;
        }

        .rec-card .card-content p {
            color: #4b5563;
            line-height: 1.6;
            font-size: 0.95rem;
        }

        .success-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 30px;
            width: 100%;
        }

        .success-category h4 {
            font-size: 1.2rem;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid;
        }

        .category-academic {
            color: #3b82f6;
            border-color: #3b82f6;
        }

        .category-wellbeing {
            color: #10b981;
            border-color: #10b981;
        }

        .category-resources {
            color: #f59e0b;
            border-color: #f59e0b;
        }

        .category-financial {
            color: #8b5cf6;
            border-color: #8b5cf6;
        }

        .success-category ul {
            list-style: none;
        }

        .success-category li {
            padding: 8px 0;
            color: #4b5563;
            position: relative;
            padding-left: 20px;
        }

        .success-category li:before {
            content: "✓";
            position: absolute;
            left: 0;
            color: #22c55e;
            font-weight: bold;
        }

        .success-category li.warning:before {
            content: "⚠";
            color: #f59e0b;
        }

        .button-group {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-top: 40px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 12px 30px;
            border-radius: 8px;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s;
            cursor: pointer;
            font-size: 1rem;
            border: 2px solid;
        }

        .btn-primary {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .btn-primary:hover {
            background: #5568d3;
            border-color: #5568d3;
        }

        .btn-outline {
            background: white;
            color: #667eea;
            border-color: white;
        }

        .btn-outline:hover {
            background: transparent;
            color: white;
        }

        @media (max-width: 768px) {
            .questionnaire-header h1 {
                font-size: 2rem;
            }

            .rec-grid {
                grid-template-columns: 1fr;
            }

            .success-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="recommendations-container">
        <div class="questionnaire-header">
            <h1>Your Personalized AI Recommendations</h1>
            <p>Evidence-based strategies tailored to your specific situation</p>
        </div>

        <div id="outcome-alert"></div>
        <div id="high-priority-recs"></div>
        <div id="medium-priority-recs"></div>

        <div class="card">
            <div class="card-header">
                <h2>Your Personalized Success Plan</h2>
            </div>
            <div class="card-content">
                <div class="success-grid" id="success-factors"></div>
            </div>
        </div>

        <div class="button-group">
            <a href="questionnaire.html" class="btn btn-outline">Retake Assessment</a>
            <a href="index.html" class="btn btn-primary">Back to Home</a>
        </div>
    </div>

    <script>
        function generateRecommendations(data, predictionResult) {
            const recommendations = [];
            const { outcome, confidence } = predictionResult;
            
            const firstSemester = parseFloat(data.first_semester_grade) || 0;
            const secondSemester = parseFloat(data.second_semester_grade) || 0;
            const firstApproved = parseInt(data.first_semester_approved) || 0;
            const secondApproved = parseInt(data.second_semester_approved) || 0;
            const admissionGrade = parseFloat(data.admission_grade) || 0;
            const age = parseFloat(data.age_at_enrollment) || 0;
            const averageGrade = (firstSemester + secondSemester) / 2;
            
            if (averageGrade < 10) {
                recommendations.push({
                    icon: '🚨',
                    title: 'CRITICAL: Emergency Academic Intervention Needed',
                    description: 'Your grades are at a critical level. Schedule an emergency meeting with your academic advisor TODAY. Request immediate enrollment in intensive tutoring programs and consider academic probation support services.',
                    priority: 'high'
                });
                
                recommendations.push({
                    icon: '📞',
                    title: 'Contact Academic Dean Immediately',
                    description: 'Reach out to your department\'s academic dean to discuss options: reduced course load, incomplete grades, or medical withdrawal if health issues are affecting performance.',
                    priority: 'high'
                });
            } else if (averageGrade < 13) {
                recommendations.push({
                    icon: '📚',
                    title: 'Urgent: Implement Intensive Study Strategy',
                    description: 'Dedicate 3-4 hours daily to focused study. Use the Pomodoro technique (25-min study + 5-min break). Attend every office hour and tutoring session available.',
                    priority: 'high'
                });
                
                recommendations.push({
                    icon: '👥',
                    title: 'Form Study Groups This Week',
                    description: 'Connect with 2-3 high-performing classmates. Meet 2-3 times per week to review materials, quiz each other, and work through difficult concepts together.',
                    priority: 'high'
                });
            } else if (averageGrade < 15) {
                recommendations.push({
                    icon: '📈',
                    title: 'Level Up Your Study Techniques',
                    description: 'You\'re doing okay, but can do better. Try active recall and spaced repetition. Use flashcards, practice problems, and teach concepts to others to deepen understanding.',
                    priority: 'high'
                });
            } else if (averageGrade < 17) {
                recommendations.push({
                    icon: '🎯',
                    title: 'Push for Academic Excellence',
                    description: 'You\'re performing well! Challenge yourself with advanced materials, optional projects, or research opportunities to stand out and prepare for graduate studies or career advancement.',
                    priority: 'medium'
                });
            } else {
                recommendations.push({
                    icon: '🌟',
                    title: 'Maintain Excellence & Mentor Others',
                    description: 'Outstanding performance! Consider becoming a peer tutor, joining honors programs, or pursuing undergraduate research. Your success can inspire and help struggling students.',
                    priority: 'medium'
                });
            }
            
            const gradeDrop = firstSemester - secondSemester;
            if (gradeDrop > 2) {
                recommendations.push({
                    icon: '⚠️',
                    title: 'Address Significant Grade Decline',
                    description: `Your grades dropped ${gradeDrop.toFixed(1)} points from first to second semester. Identify what changed: increased difficulty, personal issues, time management? Address root causes immediately.`,
                    priority: 'high'
                });
            } else if (secondSemester > firstSemester + 2) {
                recommendations.push({
                    icon: '📊',
                    title: 'Excellent Progress - Keep It Up!',
                    description: `Your grades improved ${(secondSemester - firstSemester).toFixed(1)} points! Document what strategies worked (study schedule, tutoring, better attendance) and maintain them.`,
                    priority: 'medium'
                });
            }
            
            const totalApproved = firstApproved + secondApproved;
            const totalPossible = 20;
            const completionRate = (totalApproved / totalPossible) * 100;
            
            if (completionRate < 50) {
                recommendations.push({
                    icon: '⏰',
                    title: 'Critical: Low Course Completion Rate',
                    description: `You've only completed ${totalApproved}/20 possible courses (${completionRate.toFixed(0)}%). Meet with advisors to create a catch-up plan. Consider summer courses or retaking failed units.`,
                    priority: 'high'
                });
            } else if (completionRate < 70) {
                recommendations.push({
                    icon: '📝',
                    title: 'Improve Course Completion Rate',
                    description: `You've completed ${totalApproved}/20 courses (${completionRate.toFixed(0)}%). Focus on finishing what you start. Don't overload - it's better to complete fewer courses well than fail many.`,
                    priority: 'high'
                });
            }
            
            const expectedGrade = (admissionGrade / 190) * 20;
            if (averageGrade < expectedGrade - 3) {
                recommendations.push({
                    icon: '🔍',
                    title: 'Underperforming Based on Entry Qualifications',
                    description: `Your admission grade suggests you should average around ${expectedGrade.toFixed(1)}, but you're at ${averageGrade.toFixed(1)}. Assess if you're studying effectively or facing external challenges.`,
                    priority: 'high'
                });
            }
            
            if (data.tuition_up_to_date === 0) {
                recommendations.push({
                    icon: '💳',
                    title: 'URGENT: Resolve Tuition Payment Issues',
                    description: 'Outstanding tuition can block registration and transcripts. Contact financial aid office IMMEDIATELY to explore payment plans, emergency funds, scholarships, or hardship waivers.',
                    priority: 'high'
                });
                
                recommendations.push({
                    icon: '💰',
                    title: 'Apply for All Available Financial Aid',
                    description: 'Submit FAFSA/financial aid applications, search for scholarships (even small ones add up), and inquire about work-study programs or institutional grants.',
                    priority: 'high'
                });
            }
            
            if (age < 20) {
                recommendations.push({
                    icon: '🎓',
                    title: 'Develop Strong Academic Habits Early',
                    description: 'As a young student, establishing good habits now will serve you throughout your academic career. Focus on time management, note-taking skills, and avoiding procrastination.',
                    priority: 'medium'
                });
            } else if (age > 30) {
                recommendations.push({
                    icon: '⚖️',
                    title: 'Balance Life Responsibilities Effectively',
                    description: 'As a non-traditional student, time management is crucial. Set boundaries with family/work, study during your peak energy hours, and don\'t hesitate to use online/evening classes.',
                    priority: 'high'
                });
            }
            
            if (data.special_needs === 1) {
                recommendations.push({
                    icon: '♿',
                    title: 'Maximize Disability Services & Accommodations',
                    description: 'Register with disability services if you haven\'t. Request accommodations like extended test time, note-taking assistance, or accessible materials. These aren\'t advantages - they level the playing field.',
                    priority: 'high'
                });
            }
            
            if (data.displaced === 1) {
                recommendations.push({
                    icon: '🏠',
                    title: 'Access Support for Displaced Students',
                    description: 'Being displaced adds significant stress. Seek counseling services, emergency housing assistance, and connect with student support networks. Your mental health directly impacts academic success.',
                    priority: 'high'
                });
            }
            
            if (data.student_type === 0) {
                recommendations.push({
                    icon: '🌍',
                    title: 'Utilize International Student Resources',
                    description: 'Language barriers and cultural adjustment are real challenges. Attend international student orientation, join cultural clubs, and don\'t hesitate to ask for clarification in classes.',
                    priority: 'medium'
                });
            }
            
            if (data.marital_status !== 1) {
                recommendations.push({
                    icon: '👨‍👩‍👧‍👦',
                    title: 'Coordinate Family Support for Studies',
                    description: 'Communicate clear study schedules with family. Set aside dedicated, uninterrupted study time. Consider childcare options or study during children\'s school/nap times if applicable.',
                    priority: 'medium'
                });
            }
            
            if (data.parent_occupation_group >= 7) {
                recommendations.push({
                    icon: '🤝',
                    title: 'Access First-Generation/Low-Income Resources',
                    description: 'Many universities have programs specifically for first-gen or low-income students. These offer mentoring, financial support, and connections that can significantly boost success.',
                    priority: 'medium'
                });
            }
            
            if (outcome === 'Drop Out') {
                recommendations.push({
                    icon: '🛟',
                    title: 'Prevent Dropout - Create Emergency Action Plan',
                    description: 'The AI predicts dropout risk, but you can change this! Meet with retention specialists, consider a semester reduction, address mental health, and explore leave of absence vs. complete withdrawal.',
                    priority: 'high'
                });
                
                recommendations.push({
                    icon: '💪',
                    title: 'Build Your Support Network NOW',
                    description: 'Isolation increases dropout risk. Connect with at least 3 people: an academic advisor, a supportive professor, and a peer mentor or counselor. Meet with them weekly.',
                    priority: 'high'
                });
            } else if (outcome === 'Remain Enrolled') {
                recommendations.push({
                    icon: '🎯',
                    title: 'Shift from Enrolled to Graduate Track',
                    description: 'You\'re at risk of prolonged enrollment. Create a graduation timeline with your advisor, identify exactly what courses you need, and set concrete goals to move toward completion.',
                    priority: 'high'
                });
            } else if (outcome === 'Graduate') {
                recommendations.push({
                    icon: '🚀',
                    title: 'Prepare for Life After Graduation',
                    description: 'You\'re on track to graduate! Start career planning: update resume, network with professionals, apply for internships, and prepare for job search or graduate school applications.',
                    priority: 'medium'
                });
            }
            
            if (confidence < 0.6 && outcome !== 'Graduate') {
                recommendations.push({
                    icon: '🎲',
                    title: 'Your Outcome Is Uncertain - Take Control',
                    description: `The AI is ${(confidence * 100).toFixed(0)}% confident in its prediction, meaning your future is still very much in your hands. Small changes NOW can dramatically shift your trajectory.`,
                    priority: 'high'
                });
            }
            
            return recommendations;
        }

        function generateSuccessFactors(data, predictionResult) {
            const { outcome } = predictionResult;
            const factors = {
                academic: [],
                wellbeing: [],
                resources: [],
                financial: []
            };
            
            const firstSemester = parseFloat(data.first_semester_grade) || 0;
            const secondSemester = parseFloat(data.second_semester_grade) || 0;
            const averageGrade = (firstSemester + secondSemester) / 2;
            
            if (averageGrade < 13) {
                factors.academic.push({ text: 'Attend EVERY class without exception', warning: true });
                factors.academic.push({ text: 'Visit professors during office hours weekly', warning: true });
                factors.academic.push({ text: 'Join or form study groups immediately', warning: true });
                factors.academic.push({ text: 'Use campus tutoring center 3x per week minimum', warning: false });
                factors.academic.push({ text: 'Complete all assignments on time - no excuses', warning: true });
            } else if (averageGrade < 15) {
                factors.academic.push({ text: 'Maintain consistent class attendance', warning: false });
                factors.academic.push({ text: 'Ask questions during lectures and discussions', warning: false });
                factors.academic.push({ text: 'Review notes within 24 hours of class', warning: false });
                factors.academic.push({ text: 'Start assignments early, not the night before', warning: false });
                factors.academic.push({ text: 'Use practice exams and past materials', warning: false });
            } else {
                factors.academic.push({ text: 'Continue attending all classes', warning: false });
                factors.academic.push({ text: 'Help struggling classmates (reinforces learning)', warning: false });
                factors.academic.push({ text: 'Pursue extra credit or advanced projects', warning: false });
                factors.academic.push({ text: 'Maintain active participation in discussions', warning: false });
                factors.academic.push({ text: 'Consider undergraduate research opportunities', warning: false });
            }
            
            if (data.displaced === 1 || data.special_needs === 1 || outcome === 'Drop Out') {
                factors.wellbeing.push({ text: 'Schedule counseling appointment this week', warning: true });
                factors.wellbeing.push({ text: 'Get 7-9 hours of sleep (critical for learning)', warning: true });
                factors.wellbeing.push({ text: 'Exercise 20+ minutes daily (reduces stress)', warning: false });
                factors.wellbeing.push({ text: 'Practice stress management techniques daily', warning: true });
                factors.wellbeing.push({ text: 'Limit alcohol and avoid drugs completely', warning: true });
            } else if (outcome === 'Remain Enrolled') {
                factors.wellbeing.push({ text: 'Prioritize adequate sleep (7-8 hours)', warning: false });
                factors.wellbeing.push({ text: 'Exercise regularly to manage stress', warning: false });
                factors.wellbeing.push({ text: 'Maintain social connections and friendships', warning: false });
                factors.wellbeing.push({ text: 'Take short breaks during study sessions', warning: false });
                factors.wellbeing.push({ text: 'Seek help if feeling overwhelmed', warning: false });
            } else {
                factors.wellbeing.push({ text: 'Maintain healthy sleep schedule', warning: false });
                factors.wellbeing.push({ text: 'Stay physically active for mental clarity', warning: false });
                factors.wellbeing.push({ text: 'Balance academics with social life', warning: false });
                factors.wellbeing.push({ text: 'Practice mindfulness or meditation', warning: false });
                factors.wellbeing.push({ text: 'Celebrate achievements and milestones', warning: false });
            }
            
            if (averageGrade < 13 || outcome === 'Drop Out') {
                factors.resources.push({ text: 'Meet with academic advisor EVERY 2 weeks', warning: true });
                factors.resources.push({ text: 'Attend all tutoring sessions available', warning: true });
                factors.resources.push({ text: 'Use writing center for all major papers', warning: false });
                factors.resources.push({ text: 'Access library research help and databases', warning: false });
                factors.resources.push({ text: 'Attend academic skills workshops', warning: true });
            } else {
                factors.resources.push({ text: 'Meet with academic advisor each semester', warning: false });
                factors.resources.push({ text: 'Utilize library resources and study spaces', warning: false });
                factors.resources.push({ text: 'Attend career services workshops', warning: false });
                factors.resources.push({ text: 'Join relevant academic clubs or societies', warning: false });
                factors.resources.push({ text: 'Network with professors and professionals', warning: false });
            }
            
            if (data.tuition_up_to_date === 0) {
                factors.financial.push({ text: 'Contact financial aid office IMMEDIATELY', warning: true });
                factors.financial.push({ text: 'Set up tuition payment plan this week', warning: true });
                factors.financial.push({ text: 'Apply for emergency grants and scholarships', warning: true });
                factors.financial.push({ text: 'Search for part-time work-study positions', warning: false });
                factors.financial.push({ text: 'Create strict monthly budget and stick to it', warning: true });
            } else if (data.parent_occupation_group >= 7) {
                factors.financial.push({ text: 'Apply for all eligible scholarships', warning: false });
                factors.financial.push({ text: 'Monitor financial aid renewal deadlines', warning: false });
                factors.financial.push({ text: 'Consider work-study for experience', warning: false });
                factors.financial.push({ text: 'Budget carefully for books and supplies', warning: false });
                factors.financial.push({ text: 'Explore emergency assistance if needed', warning: false });
            } else {
                factors.financial.push({ text: 'Keep tuition payments current', warning: false });
                factors.financial.push({ text: 'Research scholarship opportunities', warning: false });
                factors.financial.push({ text: 'Budget for educational expenses', warning: false });
                factors.financial.push({ text: 'Save for future educational costs', warning: false });
                factors.financial.push({ text: 'Avoid unnecessary student debt', warning: false });
            }
            
            return factors;
        }

        function displayRecommendations(recommendations, outcome) {
            const highPriority = recommendations.filter(r => r.priority === 'high');
            const mediumPriority = recommendations.filter(r => r.priority === 'medium');
            
            const outcomeAlert = document.getElementById('outcome-alert');
            let alertHTML = '';
            
            if (outcome === 'Graduate') {
                alertHTML = `
                    <div class="card alert-box success">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <div>
                            <h3>🎉 Excellent News - On Track for Graduation!</h3>
                            <p>Based on your academic performance and circumstances, our AI model predicts you're likely to graduate successfully. 
                            Continue following the recommendations below to maintain your momentum and potentially exceed expectations.</p>
                        </div>
                    </div>
                `;
            } else if (outcome === 'Remain Enrolled') {
                alertHTML = `
                    <div class="card alert-box warning">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/>
                        </svg>
                        <div>
                            <h3>⚠️ Action Needed - Risk of Extended Enrollment</h3>
                            <p>Our AI analysis indicates you'll likely remain enrolled but may face challenges graduating on time. 
                            This is a critical turning point - the high-priority actions below can shift you toward graduation. Take them seriously.</p>
                        </div>
                    </div>
                `;
            } else if (outcome === 'Drop Out') {
                alertHTML = `
                    <div class="card alert-box danger">
                        <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"/>
                        </svg>
                        <div>
                            <h3>🚨 Urgent Intervention Required</h3>
                            <p>Our AI model predicts significant risk of not completing your program. However, this is NOT inevitable! 
                            Many students in similar situations have turned things around. Focus immediately on the high-priority actions below - they could change your entire trajectory.</p>
                        </div>
                    </div>
                `;
            }
            
            if (alertHTML) {
                outcomeAlert.innerHTML = alertHTML;
            }
            
            const highPrioritySection = document.getElementById('high-priority-recs');
            if (highPriority.length > 0) {
                let html = '<div class="recommendations-section"><h2>High Priority Actions</h2><div class="rec-grid">';
                highPriority.forEach(rec => {
                    html += `
                        <div class="card rec-card high">
                            <div class="card-header">
                                <span style="font-size: 1.5rem;">${rec.icon}</span>
                                <h3>${rec.title}</h3>
                            </div>
                            <div class="card-content">
                                <p>${rec.description}</p>
                            </div>
                        </div>
                    `;
                });
                html += '</div></div>';
                highPrioritySection.innerHTML = html;
            }
            
            const mediumPrioritySection = document.getElementById('medium-priority-recs');
            if (mediumPriority.length > 0) {
                let html = '<div class="recommendations-section"><h2>Additional Recommendations</h2><div class="rec-grid">';
                mediumPriority.forEach(rec => {
                    html += `
                        <div class="card rec-card medium">
                            <div class="card-header">
                                <span style="font-size: 1.5rem;">${rec.icon}</span>
                                <h3>${rec.title}</h3>
                            </div>
                            <div class="card-content">
                                <p>${rec.description}</p>
                            </div>
                        </div>
                    `;
                });
                html += '</div></div>';
                mediumPrioritySection.innerHTML = html;
            }
        }

        function displaySuccessFactors(factors) {
            const successFactorsDiv = document.getElementById('success-factors');
            let html = '';
            
            const categories = [
                { key: 'academic', title: 'Academic Excellence', class: 'category-academic' },
                { key: 'wellbeing', title: 'Personal Well-being', class: 'category-wellbeing' },
                { key: 'resources', title: 'Resource Utilization', class: 'category-resources' },
                { key: 'financial', title: 'Financial Stability', class: 'category-financial' }
            ];
            
            categories.forEach(cat => {
                html += `
                    <div class="success-category">
                        <h4 class="${cat.class}">${cat.title}</h4>
                        <ul>
                `;
                
                factors[cat.key].forEach(factor => {
                    const warningClass = factor.warning ? ' class="warning"' : '';
                    html += `<li${warningClass}>${factor.text}</li>`;
                });
                
                html += `
                        </ul>
                    </div>
                `;
            });
            
            successFactorsDiv.innerHTML = html;
        }

        window.addEventListener('DOMContentLoaded', function() {
            const questionnaireData = JSON.parse(sessionStorage.getItem('questionnaireData') || 'null');
            const predictionResult = JSON.parse(sessionStorage.getItem('predictionResult') || 'null');
            
            if (!questionnaireData || !predictionResult) {
                alert('No data found. Please complete the questionnaire first.');
                window.location.href = 'questionnaire.html';
                return;
            }
            
            const recommendations = generateRecommendations(questionnaireData, predictionResult);
            displayRecommendations(recommendations, predictionResult.outcome);
            
            const successFactors = generateSuccessFactors(questionnaireData, predictionResult);
            displaySuccessFactors(successFactors);
        });
    </script>
</body>
</html>